# Various quiks and features

ACE Engine is a hack for DOS Doom so i has various workrounds, speed optimizations and stuff.  
Here are some recommended things and good tips.

## Precalculation

Since palette color matching on 486 hardware is slow, some tables are better precalculated.  
Now, ACE Engine can calculate those but it would take ages on old hardware. This is something you won't even notice in DosBox.

Main lump, `ACE_RNDR`, contains various transparency and color tables. This can be dumped to file using `-dumptables` command line parameter.  
This will generate `ACE_RNDR.LMP` which you can the import to your WAD file.

Secondary lumps are various color and fog tables for sector light.  
Everytime you use [ColorSetter](https://zdoom.org/wiki/Classes:ColorSetter) or [FadeSetter](https://zdoom.org/wiki/Classes:FadeSetter) up to two new tables are required.  
These tables are generated by ACE Engine and can dumped using `savelight` command. Though, this has to be done for every level.
This cheat code will create lump(s) with naming scheme like `+0F0F0E0.LMP`. Import **all** generated lumps to your WAD file.

**You have to generate those tables verytime you change palette!**  
The best is to generate these tables last, just before releasing your WAD.

## MAP format

ACE Engine supports *Hexen map format*. Use of this format is *recommended* as it allows you to use all new features.

## Polyobjects

Polyobjects are supported with these exceptions:

- polyobject ID `0` can **not** be used
- only `Polyobj_StartLine` can be used to define polyobject

## 3D floors

Yes, 3D floors are supported with some limitations. Thouh heavy use is not recommended as each visible 3D floor have performance hit on rendering.

- only `Y` offset of control line is supported
  - **always** set `X` offset to **zero**
- only types `1` `2` and `3` are supported
  - type extra `4` `16` and `32` are also supported
- only flag `64` is supported
- `flag` 512 is forced and can't be removed
  - this causes different behavior to ZDoom with `FadeSetter`
- rendering limitation for masked textures (= textures with holes)
  - **always** make sure total `Y` offset is never **negative**

## Colored light and sector fog

Use [ColorSetter](https://zdoom.org/wiki/Classes:ColorSetter) for colored sectors.  
Use [FadeSetter](https://zdoom.org/wiki/Classes:FadeSetter) for sector fog.  
If you use line special [Sector_SetColor](https://zdoom.org/wiki/Sector_SetColor) or [Sector_SetFade](https://zdoom.org/wiki/Sector_SetFade) in your map, this color or fade has to be already used in the map.  Use dummy sectors with `ColorSetter` and `FadeSetter`.

Use **only one** `ColorSetter` and `FadeSetter` per sector! (one of each type)  
`ColorSetter`s and `FadeSetter`s internaly **do not exist**! Giving those `thing id` for scripting has **no effect**!

## Sector actions

ACE Engine supports two sector action things. [Enter sector](https://zdoom.org/wiki/Classes:SecActEnter) and [exit sector](https://zdoom.org/wiki/Classes:SecActExit).  
Both actions support all four map flags.

Use **only one** one of each type per sector!  
These things internaly **do not exist**! Giving those `thing id` for scripting has **no effect**!
